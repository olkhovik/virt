# **Домашняя работа к занятию 5.1 «Введение в виртуализацию. Типы и функции гипервизоров. Обзор рынка вендоров и областей применения».**
## _Задача №1_
_Опишите кратко, как вы поняли: в чем основное отличие полной (аппаратной) виртуализации, паравиртуализации и виртуализации на основе ОС._
__________________________________
Отличия состоят в необходимости модифицировать гостевые ОС:

- При **полной (аппаратной) виртуализации** она не требуется. Гипервизор устанавливается непосредственно на железо как ОС.
- При **паравиртуализации** госетвые ОС используют только собственные ресурсы, выделенные гипервизором, незначительно модифицируется ядро ОС. Гипервизор устанавливается как служба на хостовой машине.
- При **виртуализации на основе ОС**, разделение ресурсов осуществляется на уровне ОС, гостевые ОС могут использовать все ресурсы хостовй машины, но не могут иметь собственного ядра, используют ядро хоста.


## _Задача №2_
_Выберите один из вариантов использования организации физических серверов, в зависимости от условий использования._

Организация серверов:

- физические сервера,
- паравиртуализация,
- виртуализация уровня ОС.

Условия использования:

- Высоконагруженная база данных, чувствительная к отказу.
- Различные web-приложения.
- Windows системы для использования бухгалтерским отделом.
- Системы, выполняющие высокопроизводительные расчеты на GPU.

_Опишите, почему вы выбрали к каждому целевому использованию такую организацию._
____________________________
**- Высоконагруженная база данных, чувствительная к отказу:**

Организация серверов - кластер физических серверов или аппаратная виртуализация - т.к. требуется высокая производительность, максимально доступны все ресурсы хоста.

**- Различные web-приложения:**

Организация серверов - виртуализация уровня ОС. Множество изолированных вэб-приложений на одном хосте, которые легче запускать из мини-контейнеров, чем манипулировать отдельными виртуальными машинами, нет жестких требований к аппаратнымм ресурсам, быстрое масштабирование.

**- Windows системы для использования бухгалтерским отделом:**

Организация серверов - паравиртуализация. Отказоустойчивость, удобное бэкапирование и миграция, нет жёстких требований к аппаратным ресурсам.

**- Системы, выполняющие высокопроизводительные расчеты на GPU:**

Организация серверов - виртуализация уровня ОС - полный доступ гостевых ОС к ресурсам GPU


## _Задача №3_
_Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор._

_Сценарии:_

_1. 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий._

_2. Требуется наиболее производительное бесплатное open source решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин._

_3. Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры._

_4. Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux._

-------------------------------------

1. Первый сценарий, как мне кажется, лучше разделить на два:

**- 100 виртуальных машин...** - можно построить на базе и Hyper-V и VMWare и KVM в зависимости от имеющиеся инфраструктры и компетенций персонала. Также можно рассмотреть облачные решения: Yandex Cloud, Microsoft Azure, AWS EC2  
**- Преимущественно Windows-based инфраструктура...** - кластер на основе Hyper-V, как оптимальный для Windows инфраструктуры, с помощью его компонентов можно обеспечить и балансировку и репликацию, с помощью Veeam автоматическое резервирование.

2. Здесь я бы выбрал KVM - он бесплатен и производителен
3. Hyper-V Server - бесплатен, будет максимально совместим с Windows-инфраструктурой
4. В этом сценарии я бы использовал Oracle VirtualBox вместе с Vagrant, т.к. решение бесплатно и удобно для автоматического создания виртуальных машин для целей тестирования.

## _Задача №4_
_Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был выбор, то создавали бы вы гетерогенную среду или нет? Мотивируйте ваш ответ примерами._
______________________________________
Гетерогенная среда виртуализации может порождать в работе большое число проблем или как минимум неудобств, поэтому, по возможности, такого сценария построения инфраструктуры следует избегать. Общие проблемы гетерогенности среды, на мой взляд такие:

- избыточное потребление ресурсов для обеспечения работы нескольких гипервизоров
- различные форматы хранения конфигураций виртуальных машин и форматы образов жёстких дисков
- несколько решений реализации стевого стека под каждый гипервизор, которые будут работать с одним физическим железом
- инструменты резервного копирования должны поддерживать все используемые системы, либо требуется организовывать свой сценарий резервного копирования для каждого гипервизора
- необходимость лицензирования для коммерческих решений и регулярного обновления актуальна для каждого используемого гипервизора
- в целом все скрипты/инструменты/приложения, работающие вне виртуальных машин и как-либо с ними взаимодействующие, должны будут учитывать особенности всех гипервизоров

Если нет возможности избежать использования гетерогенной среды виртуализации, следует хотя бы максимально разграничить области их применения: к примеру строить всю инфраструктуру на базе Hyper-V и ограниченно использовать VMWare для виртуализации машин, требующих проброса USB-устройств (что не умеет Hyper-V). Особенно важно избегать прямого использования нескольких гипервизоров на одном физическом сервере.

Если бы я выбирал, то делал бы максимально единообразную систему с минимумом разнообразия используемых технологий в основе.




